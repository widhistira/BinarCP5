<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/login.css">
    <script src="https://kit.fontawesome.com/2eae1cd9e8.js" crossorigin="anonymous"></script>
    <!-- <script src="js/login.js" defer></script> -->
    <title>Login Game</title>
</head>
<body>
        <div class="login">

            <div class="avatar">
                <i class="fas fa-dragon"></i>
            </div>

            <h2>Login Game</h2>
            <div class="box-login">
                <i class="fas fa-user-secret"></i>
                <input type="text" name="username" id="username" placeholder="Username">
            </div>

            <div class="box-login">
                <i class="fas fa-lock"></i>
                <input type="password" name="password" id="password" placeholder="Password">
            </div>

            <div class="button">
            <button type="submit" onclick="onClick()">LOGIN</button>
          </div>
            <div class="bottom">
                <a href="">Register</a>
                <a href="">Forgot Password</a>
            </div>
        </div>
    
        <script>
            let onClick = () => {
    let username = document.getElementById("username")
    let password = document.getElementById("password")

    let config = {
      method: "post",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        username: username.value,
        password: password.value
      })
    }

    fetch("/main", config)
      .then(response => response.json())
      .then(result => {
        console.log(result)
        if (result.message === "Login Successful") {
          alert(result.message)
          window.location.href = "/main"
        }
        // sessionStorage.setItem("login-data", JSON.stringify(result))
      })
      .catch(err => console.log(err))

    username = ""
    password = ""
  }
        </script>
</body>
</html>